<html>

<head>
  <%- include('./includes/head', { siteTitle: `${post.title} | ${themeConfig.siteName}` }) %>
    <link rel="stylesheet" href="<%= themeConfig.domain %>/styles/main.css">
    <script src="<%= themeConfig.domain %>/media/scripts/clipboard.min.js"></script>
  </head>

<body class="post">
  <div class="main">
    <div class="main-content">
      <%- include('./includes/header') %>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              <%= post.title %>
            </h2>
            <div class="post-info">
              <time class="post-time">
                · <%= post.dateFormat %> ·
              </time>
              <% post.tags.forEach(function(tag) { %>
                <a href="<%= tag.link %>" class="post-tags">
                  # <%= tag.name %>
                </a>
                <% }); %>
            </div>
            <% if (themeConfig.showFeatureImage && post.feature) { %>
              <div class="post-feature-image" style="background-image: url('<%= post.feature %>')">
              </div>
              <% } %>
                <div class="post-content">
                  <%- post.content %>
                </div>
          </article>
        </div>

        <div class="post-line"></div>

        <div class="sibling-post">
          <% if (post.prevPost && !post.hideInList) { %>
            <div class="prev-post">
              <div class="prev">上一篇</div>
              <a href="<%= post.prevPost.link %>">
                <h3 class="post-title">
                  <%= post.prevPost.title %>
                </h3>
              </a>
            </div>
            <% } %>
              <% if (post.nextPost && !post.hideInList) { %>
                <div class="next-post">
                  <div class="next">下一篇</div>
                  <a href="<%= post.nextPost.link %>">
                    <h3 class="post-title">
                      <%= post.nextPost.title %>
                    </h3>
                  </a>
                </div>
                <% } %>
        </div>

        <% if (typeof commentSetting !=='undefined' && commentSetting.showComment) { %>
          <% if (commentSetting.commentPlatform==='gitalk' ) { %>
            <%- include('./includes/gitalk') %>
              <% } %>

                <% if (commentSetting.commentPlatform==='disqus' ) { %>
                  <%- include('./includes/disqus') %>
                    <% } %>
                      <% } %>

                        <%- include('./includes/footer') %>
    </div>
  </div>
  <script src="<%= themeConfig.domain %>/media/scripts/code-copy.js"></script>

  <script>
    (function () {
      /* 
      此函数用来高亮页面左侧 header 的 “关于” 链接，sitename/post/about/
      */
      const path = location.pathname.slice(0, -1);
      const navLinks = document.querySelectorAll('a.menu');
      for (let link of navLinks) {
        const linkHref = link.getAttribute('href');
        if (linkHref === path) {
          link.style.color = '#ffc402';
          link.style.backgroundColor = '#26252f';
          link.style.borderRight = '.5em #ffc402 solid';
        }
      }
    })()
  </script>
</body>

</html>